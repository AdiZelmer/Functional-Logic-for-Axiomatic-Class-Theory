function TStringSentence.FormToClassGenerator(i : Integer) : String;
  var
    k, n, p, x : Integer;
    Gx, Gk, Nk : Integer;
begin
  Result := '';
  if Sentence[i] = Sand then begin
    if Sentence[i + 1] = Sset then begin
      x := i + 2;
      p := FirstPosAfter(x);
      n := FirstPosAfter(p);
      Result :=
        Copy(Sentence, 1, i - 1) +
        Sapa + Copy(Sentence, x, p - x) +
        Sgen
      ;
      k := p;
      while k < n do begin
        if Sentence[k] = Spoi then begin
          Gk := GetQuantifier(k);
          if Gk < p then begin  // extern
            if Sentence[x] = Spoi then begin
              if GetQuantifier(x) = Gk then begin
                Nk := QuantifierParentsNumberIn(p, k);
                Result := Result + Spoi + IntToStr(Nk + 1);
                k := FirstPosAfter(k);
              end else begin
                Inc(k);
                Nk := GetNumber(k);
                Result := Result + Spoi + IntToStr(Nk + 1);
              end;//if
            end else begin
              Inc(k);
              Nk := GetNumber(k);
              Result := Result + Spoi + IntToStr(Nk + 1);
            end;//if
          end else begin
            Inc(k);
            Nk := GetNumber(k);
            Result := Result + Spoi + IntToStr(Nk);
          end;//if
        end else begin if Sentence[k] in ['(', Sgen] then begin
          if SameExpression(x, k) then begin
            Nk := QuantifierParentsNumberIn(p, k);
            Result := Result + Spoi + IntToStr(Nk + 1);
            k := FirstPosAfter(k);
          end else begin
            Result := Result + Sentence[k];
            Inc(k);
          end;//if
        end else begin
          Result := Result + Sentence[k];
          Inc(k);
        end end;//if
      end;//while
      Result :=
        Result +
        Copy(Sentence, n, Len - n + 1)
      ;
    end else begin
      MessageDlg(
        'The first argument of the conjunction must be the set operator.',
        mtWarning, [mbOK], 0
      );
    end;//if
  end else begin
    MessageDlg(
      'The current position on the grid must be a conjunction.',
      mtWarning, [mbOK], 0
    );
  end;//if
end;

